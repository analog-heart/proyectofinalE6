<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
    <head th:replace="~{/fragments/head :: head}"></head>

    <body>
        <header th:replace="~{/fragments/header :: header}"></header>

        <main class="flex-grow-1 container-fluid footer-alpiso">

            <div th:replace="~{/fragments/error :: errores1}"></div>

            <section style="background-color: #443C68;">
                <div class="container py-5">


                    <div class="row">
                        <div class="col-lg-4">
                            <div class="card mb-4">
                                <div class="card-body text-center">
                                    
                                    <h5 class="mb-2" th:text="${proveedor.nombre} + ' '+ ${proveedor.apellido}"></h5>
                                    <img th:src="@{/imagen/perfil/__${proveedor.id}__}" alt="avatar"
                                         class="mb-2" style="width: 170px;" onerror="this.onerror = null; this.src='/IMG/USER.GIF'">
                                  
                                     <p class="text-muted mb-1"          th:text="'Rol: '+${proveedor.rol}"></p>
                                    <p class="text-muted mb-1"           th:text="'Servicio Ofrecido: ' +${proveedor.servicios[0].serv_descripcion}" ></p>
                                    <p class="text-muted mb-1" th:if="${proveedor.fechaAlta != null}"
                                       th:text="'Fecha Alta: '+${proveedor.fechaAlta}"> </p>
                                    <hr>
                                    <p class="text-muted mb-1"          th:text="'Cant. Contratacions '+${proveedor.cantidadTrabajos}"></p>
                                    <p class="text-muted mb-2"          th:text="'Reputacion: '+${proveedor.reputacion}"></p>                                       <p class="text-muted mb-4"          >Tel: XXXXXXXXXXXXXXX</p>
                                    <a type="button" class="btn btn-warning"
                                            href=/login
                                            >Contratar </a>
                                </div>
                            </div>
                        </div>

                        <div class="col-lg-8">
                            <div class="card mb-2 py-2">
                                <div class="card-body">
                                    <div class="row text-center"><p class="mb-2">RESEÑAS DE OTROS USUARIOS</p>
                                    </div>   
                                </div>  
                            </div>   
                            <div class="card mb-1" th:each="cont : ${contratosCalificados}">
                                <div class="card-body text-center">
                                    <div class="row">

                                        <div class="col-sm-3">
                                            <p class="text-muted mb-0">Usuario:</p>
                                        </div>
                                        <div class="col-sm-9">
                                            <p class=" mb-0" th:text="${cont.usuario.nombre}"></p>
                                        </div>
                                        <hr>

                                        <div class="col-sm-3">
                                            <p class="text-muted mb-0">Comentario:</p>
                                        </div>
                                        <div class="col-sm-9">
                                            <p class=" mb-0" th:text="${cont.comentarioFinal}"></p>
                                        </div>
                                        <hr>

                                        <div class="col-sm-3">
                                            <p class="text-muted mb-0">Calificación:</p>
                                        </div>
                                        <div class="col-sm-9">
                                            <p class=" mb-0" th:text="${cont.calificacion}"></p>
                                        </div>
                                    </div>



                                </div>   
                            </div>


                        </div>
                        <a class="btn btn-primary mt-2 container-fluid" id="botonVolver" onclick="goBack()">Volver</a> 
                    </div>   
            </section>

        </main>



        <footer th:replace="~{/fragments/footer :: footer}"></footer>
        <script src="https://kit.fontawesome.com/183f2a4aef.js"crossorigin="anonymous"></script>        
        <script> function goBack() {
                    window.history.back();
                }</script>
    </body>
</html>




<!--    <main class="container flex-grow-1" style="align-items: center;">
        <div class="contenedor">
             TARJETA PROVEEDOR 
            <div class="left-panel" id="login">
                <div class="face front">
                    <img id="fotoPerfil" th:src="@{/imagen/perfil/__${proveedor.id}__}" alt="imagen perfil" class="rounded-circle" width="100" height="100" />
                    <h3 class="card-title" th:text="${proveedor.nombre} + ' ' + ${proveedor.apellido}"></h3>
                    <h3 class="card-title" th:text="'REPUTACION: ' + ${proveedor.reputacion}"></h3>
                    <p class="card-text" th:each="serv : ${proveedor.servicios}" th:text="${serv.serv_descripcion}"></p>
                </div>

                <div class="face back">
                    <h3>Servicio:</h3>
                    <p th:each="serv : ${proveedor.servicios}" th:text="${serv.serv_descripcion}"></p>
                    <form style="width: 100%; max-width: 800px; margin: 0 auto;" method="POST" th:action="@{/contrato/contratar}">
                        <div class="link">
                             <input class="comentarioInicial" type="text" name="comentarioInicial" placeholder="Comentario del trabajo..." /> 
                            <textarea class="form-control comentarioInicial" placeholder="Comentario del trabajo..." id="floatingTextarea" name="comentarioInicial" style="height: 150px;"></textarea>
                            <button class="btn btn-primary" type="submit" name="idProveedor" th:value="${proveedor.id}">Solicitar trabajo</button>
                        </div>
                    </form>
                </div>
            </div>
             termina tarjeta  
        </div>-->








